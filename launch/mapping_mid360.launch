<launch>
  <!-- Launch file for Livox MID360 LiDAR -->

  <arg name="UAV_NAME"    default="$(env UAV_NAME)" />
  <arg name="rviz"        default="false" />

  <group ns="$(arg UAV_NAME)">

    <node pkg="point_lio" type="pointlio_mapping" name="laserMapping" output="screen">

      <rosparam command="load" file="$(find point_lio)/config/mid360.yaml" />

      <!-- ======================= parameters ======================= -->
      <param name="uav_name"               type="string" value="$(arg UAV_NAME)"/>
      <param name="use_imu_as_input"       type="bool"   value="0"/> <!--change to 1 to use IMU as input of Point-LIO-->
      <param name="prop_at_freq_of_imu"    type="bool"   value="1"/>
      <param name="check_satu"             type="bool"   value="1"/>
      <param name="init_map_size"          type="int"    value="10"/>
      <param name="cube_side_length"       type="double" value="2000" /> <!--1000-->
      <param name="runtime_pos_log_enable" type="bool"   value="0" /> <!--1-->

      <!-- ================== filtration parameters ================= -->
      <param name="space_down_sample"      type="bool"   value="1" />  
      <param name="point_filter_num"       type="int"    value="1"/> <!--4, 3--> 
      <param name="filter_size_surf"       type="double" value="0.3" /> <!--0.5, 0.3, 0.2, 0.15, 0.1--> 
      <param name="filter_size_map"        type="double" value="0.2" /> <!--0.5, 0.3, 0.15, 0.1-->
      
      <!-- subscribers -->
      <!-- ======================= subscribers ====================== -->
      <remap from="/livox/lidar" to="livox/lidar" />
      <remap from="/livox/imu" to="livox/imu" />

      <!-- ======================= publishers ======================= -->
      <remap from="/cloud_registered" to="~cloud_registered" />
      <remap from="/cloud_registered_body" to="~cloud_registered_body" />
      <remap from="/cloud_effected" to="~cloud_effected" />
      <remap from="/Laser_map" to="~laser_map" />
      <remap from="/aft_mapped_to_init" to="~odom" />
      <remap from="/path" to="~path" />
      <remap from="/planner_normal" to="~planner_normal" />
  
    </node>
  
  </group>

  <group if="$(arg rviz)">
    <node launch-prefix="nice" pkg="rviz" type="rviz" name="rviz" args="-d $(find point_lio)/rviz_cfg/loam_livox.rviz" />
  </group>

</launch>
